(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{394:function(e,t,r){var content=r(461);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(9).default)("6e65d9bb",content,!0,{sourceMap:!1})},395:function(e,t,r){var content=r(464);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(9).default)("0aa3c8b9",content,!0,{sourceMap:!1})},396:function(e,t,r){var content=r(466);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(9).default)("b27a598e",content,!0,{sourceMap:!1})},397:function(e,t,r){var content=r(468);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(9).default)("2c534eb3",content,!0,{sourceMap:!1})},401:function(e,t,r){var content=r(479);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(9).default)("26370b9b",content,!0,{sourceMap:!1})},460:function(e,t,r){"use strict";r(394)},461:function(e,t,r){(t=r(8)(!1)).push([e.i,".prepare-address{display:flex;margin-bottom:1.25rem;position:relative}.prepare-address:last-child{margin-bottom:0}@media screen and (max-width:680px){.prepare-address{flex-direction:column-reverse;background:var(--color-border);margin-bottom:1rem}}.prepare-address__meta{height:3.5rem;width:17.25rem;margin-right:1.25rem;border-radius:.25rem;background:var(--color-address);display:flex;line-height:1;overflow:hidden;flex-shrink:0}@media screen and (max-width:680px){.prepare-address__meta{margin-right:0;margin-top:.25rem;width:100%}}.prepare-address__delay{font-size:.875rem;flex-grow:1;text-align:center}.prepare-address__delay,.prepare-address__share{display:flex;align-items:center;justify-content:center;font-weight:600;color:var(--color-text-white)}.prepare-address__share{flex-shrink:0;width:6rem;height:100%;background:var(--color-address-dark);font-size:1.125rem}.prepare-address__delete{opacity:.5;cursor:pointer;transition:opacity 175ms;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:1.125rem}.prepare-address__delete:hover{opacity:.85}.prepare-address__input>input{height:3.5rem}",""]),e.exports=t},463:function(e,t,r){"use strict";r(395)},464:function(e,t,r){(t=r(8)(!1)).push([e.i,'/*! nouislider - 14.6.0 - 6/27/2020 */.noUi-target,.noUi-target *{-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;touch-action:none;-ms-user-select:none;-moz-user-select:none;user-select:none;box-sizing:border-box}.noUi-target{position:relative}.noUi-base,.noUi-connects{width:100%;height:100%;position:relative;z-index:1}.noUi-connects{overflow:hidden;z-index:0}.noUi-connect,.noUi-origin{will-change:transform;position:absolute;z-index:1;top:0;right:0;-ms-transform-origin:0 0;-webkit-transform-origin:0 0;-webkit-transform-style:preserve-3d;transform-origin:0 0;transform-style:flat}.noUi-connect{height:100%;width:100%}.noUi-origin{height:10%;width:10%}.noUi-txt-dir-rtl.noUi-horizontal .noUi-origin{left:0;right:auto}.noUi-vertical .noUi-origin{width:0}.noUi-horizontal .noUi-origin{height:0}.noUi-handle{-webkit-backface-visibility:hidden;backface-visibility:hidden;position:absolute}.noUi-touch-area{height:100%;width:100%}.noUi-state-tap .noUi-connect,.noUi-state-tap .noUi-origin{transition:transform .3s}.noUi-state-drag *{cursor:inherit!important}.noUi-horizontal{height:18px}.noUi-horizontal .noUi-handle{width:34px;height:28px;right:-17px;top:-6px}.noUi-vertical{width:18px}.noUi-vertical .noUi-handle{width:28px;height:34px;right:-6px;top:-17px}.noUi-txt-dir-rtl.noUi-horizontal .noUi-handle{left:-17px;right:auto}.noUi-target{background:#fafafa;border-radius:4px;border:1px solid #d3d3d3;box-shadow:inset 0 1px 1px #f0f0f0,0 3px 6px -5px #bbb}.noUi-connects{border-radius:3px}.noUi-connect{background:#3fb8af}.noUi-draggable{cursor:ew-resize}.noUi-vertical .noUi-draggable{cursor:ns-resize}.noUi-handle{border:1px solid #d9d9d9;border-radius:3px;background:#fff;cursor:default;box-shadow:inset 0 0 1px #fff,inset 0 1px 7px #ebebeb,0 3px 6px -3px #bbb}.noUi-active{box-shadow:inset 0 0 1px #fff,inset 0 1px 7px #ddd,0 3px 6px -3px #bbb}.noUi-handle:after,.noUi-handle:before{content:"";display:block;position:absolute;height:14px;width:1px;background:#e8e7e6;left:14px;top:6px}.noUi-handle:after{left:17px}.noUi-vertical .noUi-handle:after,.noUi-vertical .noUi-handle:before{width:14px;height:1px;left:6px;top:14px}.noUi-vertical .noUi-handle:after{top:17px}[disabled] .noUi-connect{background:#b8b8b8}[disabled].noUi-handle,[disabled] .noUi-handle,[disabled].noUi-target{cursor:not-allowed}.noUi-pips,.noUi-pips *{box-sizing:border-box}.noUi-pips{position:absolute;color:#999}.noUi-value{position:absolute;white-space:nowrap;text-align:center}.noUi-value-sub{color:#ccc;font-size:10px}.noUi-marker{position:absolute;background:#ccc}.noUi-marker-large,.noUi-marker-sub{background:#aaa}.noUi-pips-horizontal{padding:10px 0;height:80px;top:100%;left:0;width:100%}.noUi-value-horizontal{transform:translate(-50%,50%)}.noUi-rtl .noUi-value-horizontal{transform:translate(50%,50%)}.noUi-marker-horizontal.noUi-marker{margin-left:-1px;width:2px;height:5px}.noUi-marker-horizontal.noUi-marker-sub{height:10px}.noUi-marker-horizontal.noUi-marker-large{height:15px}.noUi-pips-vertical{padding:0 10px;height:100%;top:0;left:100%}.noUi-value-vertical{transform:translateY(-50%);padding-left:25px}.noUi-rtl .noUi-value-vertical{transform:translateY(50%)}.noUi-marker-vertical.noUi-marker{width:5px;height:2px;margin-top:-1px}.noUi-marker-vertical.noUi-marker-sub{width:10px}.noUi-marker-vertical.noUi-marker-large{width:15px}.noUi-tooltip{display:block;position:absolute;border:1px solid #d9d9d9;border-radius:3px;background:#fff;color:#000;padding:5px;text-align:center;white-space:nowrap}.noUi-horizontal .noUi-tooltip{transform:translate(-50%);left:50%;bottom:120%}.noUi-vertical .noUi-tooltip{transform:translateY(-50%);top:50%;right:120%}.noUi-horizontal .noUi-origin>.noUi-tooltip{transform:translate(50%);left:auto;bottom:10px}.noUi-vertical .noUi-origin>.noUi-tooltip{transform:translateY(-18px);top:auto;right:28px}.slider{padding:.55rem 0}.slider .noUi-target{border:1px sold var(--color-border);border-radius:.3rem;height:.6rem;background:var(--color-border);box-shadow:none}.slider--connect .noUi-handle{background:var(--color-border)!important}.slider .noUi-origin:nth-child(2){--color-handle:var(--color-address-1)}.slider .noUi-origin:nth-child(3){--color-handle:var(--color-address-2)}.slider .noUi-origin:nth-child(4){--color-handle:var(--color-address-3)}.slider .noUi-origin:nth-child(5){--color-handle:var(--color-address-4)}.slider .noUi-origin:nth-child(6){--color-handle:var(--color-address-5)}.slider .noUi-handle{top:-.45rem;right:-.75rem!important;width:1.5rem;height:1.5rem;border-radius:50%;border:.25rem solid #fff;background:var(--color-handle);box-shadow:0 0 .25rem .05rem rgba(0,0,0,.125);outline:none;cursor:pointer}.slider .noUi-handle:after,.slider .noUi-handle:before{content:none}.slider .noUi-connect{background:var(--color-slider)}.slider .noUi-connect:first-child{--color-slider:var(--color-address-1)}.slider .noUi-connect:nth-child(2){--color-slider:var(--color-address-2)}.slider .noUi-connect:nth-child(3){--color-slider:var(--color-address-3)}.slider .noUi-connect:nth-child(4){--color-slider:var(--color-address-4)}.slider .noUi-connect:nth-child(5){--color-slider:var(--color-address-5)}.slider .noUi-connects{border-radius:.75rem}',""]),e.exports=t},465:function(e,t,r){"use strict";r(396)},466:function(e,t,r){(t=r(8)(!1)).push([e.i,".prepare-strength{display:flex;flex-direction:column;width:100%}.prepare-strength-meter{height:12px;width:100%;display:flex}.prepare-strength-meter__cell{width:calc(1.33333% - 3.94667px);width:calc((100% - (var(--cells, 75) - 1)*4px)/var(--cells, 75));height:12px;border-radius:.125rem;margin-right:4px;background:#f2f2f2;transition:background-color .1s}.prepare-strength-meter__cell:last-child{margin-right:0}.prepare-strength-meter__cell[data-active]{background:var(--color)}.prepare-strength__labels{display:flex;justify-content:space-between;font-weight:600;margin-top:.5rem;color:var(--color-brand)}",""]),e.exports=t},467:function(e,t,r){"use strict";r(397)},468:function(e,t,r){(t=r(8)(!1)).push([e.i,".strength-factor[data-v-7c5197ef]{display:flex;line-height:1;margin-top:.5rem}.strength-factor[data-v-7c5197ef]:first-child{margin-top:0}.strength-factor>span[data-v-7c5197ef]{margin-top:2px}.strength-factor__icon[data-v-7c5197ef]{font-size:1rem;margin-right:.25rem}.strength-factor__icon--positive[data-v-7c5197ef]{color:var(--color-success)}.strength-factor__icon--negative[data-v-7c5197ef]{color:var(--color-error)}",""]),e.exports=t},478:function(e,t,r){"use strict";r(401)},479:function(e,t,r){var n=r(8),o=r(69),l=r(185),c=r(184);t=n(!1);var d=o(l),h=o(c);t.push([e.i,".prepare{padding-top:1.25rem;padding-bottom:11.25rem;background:url("+d+") no-repeat -15rem 3rem}.no-js .prepare{background:url("+h+") no-repeat -15rem 3rem}@media screen and (min-width:1920px){.prepare--calculator .prepare__content{transform:translateX(-240px)}}@media screen and (max-width:900px){.prepare{padding:1.5rem 0 4.5rem;background:none}}.prepare__content{transition:transform .5s}.prepare__columns.form-group{display:grid;grid-template-columns:17.5rem 1fr;grid-gap:1rem}@media screen and (max-width:900px){.prepare__columns.form-group{display:flex}.prepare__columns.form-group>div:first-child{display:none}}.prepare__code{margin-right:1rem}@media screen and (max-width:900px){.prepare__code{margin-right:0}}.prepare__fee{margin-right:auto}@media screen and (max-width:440px){.prepare__fee{margin:0}}.prepare__continue .button{padding:0 5rem}.prepare__calculator{margin-right:.5rem}.no-js .prepare__calculator{display:none}@media screen and (min-width:1151px){.prepare__calculator{display:none}}@media screen and (max-width:900px){.prepare__calculator{margin-right:0}}.prepare__disclaimer{color:var(--color-text-muted);margin-top:1.5rem;font-size:.875rem}.strength-tooltip__list{display:flex;flex-direction:column;margin-top:.5rem}",""]),e.exports=t},527:function(e,t,r){"use strict";r.r(t);r(32),r(22),r(23),r(28),r(29),r(455),r(26),r(456),r(457),r(27),r(190);var n=r(117),o=(r(14),r(11),r(24),r(25),r(4)),l=(r(114),r(331),r(415)),c=r(54),d=r(330),h=r(115),f={name:"prepare-address",components:{BaseIcon:h.a,FormInput:d.a},inheritAttrs:!1,props:{index:Number,color:Number,value:String,delay:Number,share:Number,only:Boolean,valid:Boolean},data:function(){return{localValue:this.value}},computed:{delayString:function(){if(!this.delay)return"Instantly";var e=Math.floor(this.delay/60),t=this.delay%60;return this.$t("prepare.delayDuration",{hours:e,minutes:t})},shareString:function(){return"".concat((this.share/10).toFixed(1),"%")}},watch:{localValue:function(e){this.$emit("input",e)}}},m=(r(460),r(3)),v=Object(m.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"prepare-address",style:{"--color-address":"var(--color-address-"+e.color+")","--color-address-dark":"var(--color-address-"+e.color+"-dark)"}},[r("div",{staticClass:"prepare-address__meta"},[r("div",{staticClass:"prepare-address__delay"},[r("span",[e._v(e._s(e.delayString))])]),e._v(" "),r("div",{staticClass:"prepare-address__share"},[r("span",[e._v(e._s(e.shareString))])])]),e._v(" "),r("input",{attrs:{name:"share["+e.index+"]",type:"hidden"},domProps:{value:e.share}}),e._v(" "),r("input",{attrs:{name:"delay["+e.index+"]",type:"hidden"},domProps:{value:e.delay}}),e._v(" "),r("form-input",e._b({staticClass:"prepare-address__input",attrs:{type:"text",error:e.valid?void 0:"Invalid bitcoin address",icons:""},scopedSlots:e._u([{key:"icons",fn:function(){return[e.only?e._e():r("button",{staticClass:"form-input__icon prepare-address__delete",attrs:{type:"submit",formaction:"/api/nojs/prepare/update",name:"action",value:"address-delete:"+e.index},on:{click:function(t){return e.$emit("delete")}}},[r("base-icon",{attrs:{icon:"trash",alt:"Delete address"}})],1)]},proxy:!0}]),model:{value:e.localValue,callback:function(t){e.localValue="string"==typeof t?t.trim():t},expression:"localValue"}},"form-input",e.$attrs,!1))],1)}),[],!1,null,null,null).exports,x=r(462),_={name:"prepare-slider",props:{connect:[Boolean,String],value:[Array,Number],min:Number,max:Number,margin:Number,step:Number,multiplier:{type:Number,default:100},unconstrained:Boolean},data:function(){var e=Array.isArray(this.value)?Object(n.a)(this.value):this.value;return{startValue:e,sliderValue:e,slider:null}},computed:{connectValue:function(){return!!this.connect&&(Array.isArray(this.value)?Array.from({length:this.value.length+1}).map((function(){return!0})):this.connect)}},watch:{value:function(){var e=this;if(Array.isArray(this.value)){if(this.value.length===this.sliderValue.length&&this.value.every((function(t,r){return t===e.sliderValue[r]})))return}else if(this.value!==this.sliderValue)return;Array.isArray(this.value)&&this.value.length!==this.sliderValue.length?this.recreateSlider():this.slider.set(this.value)},sliderValue:function(e){this.$emit("input",e)}},mounted:function(){this.createSlider()},methods:{createSlider:function(){var e=this;x.create(this.$refs.slider,{start:this.startValue,connect:this.connectValue,margin:this.margin,step:this.step,padding:this.margin,behaviour:this.unconstrained?"unconstrained-tap":"tap",range:{min:this.min,max:this.max},format:{from:function(t){return(t/e.multiplier).toFixed(2)},to:function(t){return Math.floor(t*e.multiplier)}}}),this.slider=this.$refs.slider.noUiSlider,this.slider.on("update",(function(){var t=e.slider.get();e.sliderValue=Array.isArray(t)?t:[t]}))},recreateSlider:function(){this.slider.destroy(),this.startValue=this.value,this.createSlider()}}},y=(r(463),Object(m.a)(_,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"slider",class:{"slider--connect":this.connect}},[t("div",{ref:"slider"})])}),[],!1,null,null,null).exports),U=r(328),w=r(349),k=r(329),C={components:{FormLabel:k.a,FormGroup:U.a},props:{value:Number},data:function(){return{currentValue:this.value,animation:null,cells:75}},computed:{cellActive:function(){var e=this;return function(t){return Math.round(t/e.cells*100)<=e.currentValue}},currentColor:function(){return this.currentValue>75?"rgb(21, 188, 22)":this.currentValue>25?"rgb(255, 212, 0)":"rgb(230, 48, 48)"}},watch:{value:function(e){this.animateTo(e)}},created:function(){window.addEventListener("resize",this.onResize.bind(this))},mounted:function(){this.onResize()},beforeDestroy:function(){window.removeEventListener("resize",this.onResize.bind(this))},methods:{onResize:function(){var e=this.$el.clientWidth;this.cells=Math.floor(e/16)},animateTo:function(e){var t=this;cancelAnimationFrame(this.animation);var r=this.currentValue,n=Date.now();this.animation=requestAnimationFrame((function(){return t.animate(r,e,n,1e3)}))},animate:function(e,t,r){var n=this,time=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,o=t-e,l=Date.now()-r,progress=Math.min(time,l)/time;this.currentValue=e+this.ease(progress)*o,progress>1||(this.animation=requestAnimationFrame((function(){return n.animate(e,t,r,time)})))},ease:function(e){return--e*e*e+1}}},$=(r(465),Object(m.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"prepare-strength"},[r("div",{staticClass:"prepare-strength-meter",style:{"--color":e.currentColor,"--cells":e.cells}},e._l(e.cells,(function(t){return r("div",{key:t,staticClass:"prepare-strength-meter__cell",attrs:{"data-active":e.cellActive(t)}})})),0),e._v(" "),r("div",{staticClass:"prepare-strength__labels"},[r("span",[e._v(e._s(e.$t("prepare.strengthBasic")))]),e._v(" "),r("span",[e._v(e._s(e.$t("prepare.strengthRegular")))]),e._v(" "),r("span",[e._v(e._s(e.$t("prepare.strengthExpert")))])])])}),[],!1,null,null,null).exports),F={name:"strength-factor",components:{BaseIcon:h.a},props:{label:String,value:Boolean}},z=(r(467),Object(m.a)(F,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"strength-factor"},[this.value?t("base-icon",{staticClass:"strength-factor__icon",attrs:{icon:"circle-check",alt:"OK"}}):t("base-icon",{staticClass:"strength-factor__icon",attrs:{icon:"circle-times",alt:"BAD"}}),this._v(" "),t("span",[this._v(this._s(this.label))])],1)}),[],!1,null,"7c5197ef",null).exports),A=r(413),S=r(416);function M(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw o}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var j=100,D=70,V=45,O=15;function T(){var e=parseFloat((3.5+1.5*Math.random()).toFixed(2));return Math.round(100*e)%10==0?T():e}var E={name:"app-prepare",components:{CalculatorThumb:S.a,AppCalculator:A.a,StrengthFactor:z,PrepareStrength:$,FormInput:d.a,FormLabel:k.a,FormBase:w.a,FormGroup:U.a,PrepareSlider:y,PrepareAddress:v,BaseButton:c.a,OrderStatus:l.a},fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.addDestination(),t.abrupt("return");case 3:return t.prev=3,t.next=6,e.$axios.$get("/nojs/prepare",{});case 6:if((r=t.sent)&&Object.keys(r).length){t.next=9;break}return t.abrupt("return");case 9:e.destinations=r.destinations,e.secretCode=r.secretCode,e.serviceFee=parseFloat(r.serviceFee),e.resetDestinations(),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),console.warn(t.t0.message);case 18:case"end":return t.stop()}}),t,null,[[3,15]])})))()},data:function(){return{destinations:[],splitPoints:[],delays:[0],serviceFee:T(),secretCode:"",updating:!1,error:!1,calculator:!1}},computed:{ready:function(){return!this.secretCodeError&&this.destinations.every((function(e){return e.valid}))&&!this.error},secretCodeError:function(){if(this.secretCode.length&&8!==this.secretCode.length)return"Invalid MyCryptoCode"},strengthFactors:function(){return{outputAddress:this.destinations.length>1,fee:Math.round(100*this.serviceFee)%10!=0||this.serviceFee>3.5,minDelay:Math.min.apply(Math,Object(n.a)(this.delays))>0,differentDelays:new Set(this.delays).size===this.delays.length,differentShares:new Set(this.destinations.map((function(e){return e.share}))).size===this.destinations.length}},strength:function(){var e=Object.values(this.strengthFactors).reduce((function(e,t){return e+(t?1:0)}),0);return e>4?j:e>3?D:e>2?V:O}},watch:{calculator:function(e){e&&window.innerWidth<1920?document.body.style.overflowY="hidden":document.body.style.overflowY="auto"},splitPoints:function(){if(!this.updating&&this.destinations.length){for(var i=0;i<this.splitPoints.length;++i){var e=i>0?this.splitPoints[i-1]:0;this.destinations[i].share=this.splitPoints[i]-e}var t=this.splitPoints.length?this.splitPoints[this.splitPoints.length-1]:0;this.destinations[this.destinations.length-1].share=1e3-t}},delays:function(){if(!this.updating&&this.destinations.length)for(var i=0;i<this.delays.length;++i)this.destinations[i].delay=this.delays[i]},serviceFee:function(e){var t=this;this.$nextTick((function(){var r=parseFloat(e);r<.5&&(t.serviceFee=.5),r>5&&(t.serviceFee=5)}))}},methods:{addDestination:function(){this.destinations.length>=5||(this.destinations.push({id:Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),address:null,share:null,delay:0,valid:!0}),this.resetDestinations())},deleteDestination:function(e){this.destinations.splice(this.destinations.findIndex((function(t){return t.id===e})),1),this.resetDestinations()},getRandomShares:function(){var e=Math.floor(1e3/this.destinations.length),t=Array.from({length:this.destinations.length}).map((function(){return e-10+Math.round(20*Math.random())})),r=1e3-t.reduce((function(e,t){return e+t}),0);if(0!==r){var n=Array.from({length:this.destinations.length}).fill(Math.round(r/this.destinations.length)),o=r-n.reduce((function(e,t){return e+t}),0);n[0]+=o,t=t.map((function(e,t){return e+n[t]}))}return new Set(t).size!==this.destinations.length?this.getRandomShares():t},resetDestinations:function(){this.updating=!0,this.splitPoints=[],this.delays=[];for(var e=this.getRandomShares(),i=0;i<this.destinations.length;++i){var t=this.destinations[i];if(t.share=e[i],t.delay=121+60*i+Math.round((30*i+15)*Math.random()),i+1!==this.destinations.length){var r=this.splitPoints.length?this.splitPoints[this.splitPoints.length-1]:0;this.splitPoints.push(r+t.share)}this.delays.push(t.delay)}this.updating=!1},createMix:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,l,c,d,h,f,m,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=Math.round(100*e.serviceFee),n=e.secretCode&&8===e.secretCode.length?e.secretCode:null,t.next=5,e.$api.order.create({destinations:e.destinations,serviceFee:r,secretCode:n});case 5:return o=t.sent,l=o.order,t.abrupt("return",e.$router.push(e.localePath("/order/".concat(l.id))));case 10:t.prev=10,t.t0=t.catch(0),c=M(t.t0.payload||[]),t.prev=13,c.s();case 15:if((d=c.n()).done){t.next=26;break}h=d.value,t.t1=h,t.next="destinations"===t.t1?20:23;break;case 20:f=M(e.destinations);try{for(f.s();!(m=f.n()).done;)v=m.value,e.validateDestination(v)}catch(e){f.e(t.t0)}finally{f.f()}return t.abrupt("break",24);case 23:console.warn("Invalid unknown form field: ".concat(h));case 24:t.next=15;break;case 26:t.next=31;break;case 28:t.prev=28,t.t2=t.catch(13),c.e(t.t0);case 31:return t.prev=31,c.f(),t.finish(31);case 34:case"end":return t.stop()}}),t,null,[[0,10],[13,28,31,34]])})))()},validateDestination:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$api.address.validate({address:e.address});case 2:n=r.sent,o=n.valid,e.valid=o;case 5:case"end":return r.stop()}}),r)})))()}}},R=(r(478),{name:"view-prepare",components:{AppPrepare:Object(m.a)(E,(function(){var e=this,t=this,r=t.$createElement,n=t._self._c||r;return n("section",{staticClass:"prepare",class:{"prepare--calculator":t.calculator}},[n("div",{staticClass:"prepare__content"},[n("order-status",{attrs:{step:0}}),t._v(" "),n("form-base",{staticClass:"prepare__form container",attrs:{action:"/api/nojs/prepare",method:"POST"}},[n("input",{attrs:{type:"hidden",name:"locale"},domProps:{value:t.$i18n.locale}}),t._v(" "),n("form-group",[n("form-group",{staticClass:"prepare__columns"},[n("form-label",{attrs:{label:t.$t("prepare.timePercentage"),width:"17.25rem"}}),t._v(" "),n("form-label",{attrs:{label:t.$t("prepare.addresses"),tooltip:t.$t("prepare.addressesTooltip")}})],1),t._v(" "),t._l(t.destinations,(function(e,r){return n("prepare-address",{key:e.id,attrs:{share:e.share,delay:e.delay,valid:e.valid,color:r+1,index:r,only:1===t.destinations.length,name:"destinations["+r+"]"},on:{input:function(r){return t.validateDestination(e)},delete:function(r){return t.deleteDestination(e.id)}},model:{value:e.address,callback:function(r){t.$set(e,"address",r)},expression:"destination.address"}})})),t._v(" "),t.destinations.length<5?n("base-button",{staticClass:"prepare__address-button",attrs:{tag:"button",formaction:"/api/nojs/prepare/update",name:"action",value:"address-add",type:"submit",tertiary:"",label:t.$t("prepare.addAddress"),action:t.addDestination}}):t._e()],2),t._v(" "),n("client-only",[t.destinations.length>1?n("form-group",[n("form-label",{attrs:{label:t.$t("prepare.distribution"),tooltip:t.$t("prepare.distributionTooltip")}}),t._v(" "),n("prepare-slider",{attrs:{step:1,min:0,max:1e3,multiplier:1,margin:10,connect:""},model:{value:t.splitPoints,callback:function(e){t.splitPoints=e},expression:"splitPoints"}})],1):t._e(),t._v(" "),n("form-group",[n("form-label",{attrs:{label:t.$t("prepare.delay"),tooltip:t.$t("prepare.delayTooltip")}}),t._v(" "),n("prepare-slider",{attrs:{step:1,min:0,max:1440,multiplier:1,unconstrained:""},model:{value:t.delays,callback:function(e){t.delays=e},expression:"delays"}})],1),t._v(" "),n("form-group",[n("form-label",{attrs:{label:t.$t("prepare.strength")},scopedSlots:t._u([{key:"tooltip",fn:function(){return[n("div",{staticClass:"strength-tooltip"},[n("span",[t._v(t._s(t.$t("prepare.strengthTooltip.title")))]),t._v(" "),n("div",{staticClass:"strength-tooltip__list"},[n("strength-factor",{attrs:{label:t.$t("prepare.strengthTooltip.outputAddress"),value:t.strengthFactors.outputAddress}}),t._v(" "),n("strength-factor",{attrs:{label:t.$t("prepare.strengthTooltip.fee"),value:t.strengthFactors.fee}}),t._v(" "),n("strength-factor",{attrs:{label:t.$t("prepare.strengthTooltip.minDelay"),value:t.strengthFactors.minDelay}}),t._v(" "),n("strength-factor",{attrs:{label:t.$t("prepare.strengthTooltip.differentDelays"),value:t.strengthFactors.differentDelays}}),t._v(" "),n("strength-factor",{attrs:{label:t.$t("prepare.strengthTooltip.differentShares"),value:t.strengthFactors.differentShares}})],1)])]},proxy:!0}])}),t._v(" "),n("prepare-strength",{attrs:{value:t.strength}})],1)],1),t._v(" "),n("form-group",{staticClass:"prepare__footer",attrs:{horizontal:""}},[n("form-group",{staticClass:"prepare__code"},[n("form-label",{attrs:{label:t.$t("prepare.code"),tooltip:t.$t("prepare.codeTooltip")}}),t._v(" "),n("form-input",{attrs:{name:"secretCode",width:"18rem",placeholder:"Optional",error:t.secretCodeError},model:{value:t.secretCode,callback:function(e){t.secretCode=e},expression:"secretCode"}})],1),t._v(" "),n("form-group",{staticClass:"prepare__fee"},[n("form-label",{attrs:{label:t.$t("prepare.fee"),tooltip:t.$t("prepare.feeTooltip")}}),t._v(" "),n("form-input",{attrs:{name:"serviceFee",width:"12rem",type:"number",step:"0.01",min:"0.5",max:"5",lazy:""},model:{value:t.serviceFee,callback:function(e){t.serviceFee=e},expression:"serviceFee"}})],1),t._v(" "),n("form-group",{staticClass:"prepare__calculator"},[n("base-button",{attrs:{label:t.$t("calculator.cta"),secondary:"",action:function(){return e.calculator=!0},disabled:t.calculator}})],1),t._v(" "),n("form-group",{staticClass:"prepare__continue"},[n("base-button",{attrs:{tag:"button",type:"submit",label:t.$t("prepare.continue"),action:t.createMix,disabled:!t.ready}})],1)],1),t._v(" "),n("p",{staticClass:"prepare__disclaimer"},[t._v(t._s(t.$t("prepare.note")))])],1)],1),t._v(" "),n("app-calculator",{attrs:{destinations:t.destinations,serviceFee:t.serviceFee},model:{value:t.calculator,callback:function(e){t.calculator=e},expression:"calculator"}}),t._v(" "),n("calculator-thumb",{nativeOn:{click:function(e){t.calculator=!0}}})],1)}),[],!1,null,null,null).exports}}),I=Object(m.a)(R,(function(){var e=this.$createElement,t=this._self._c||e;return t("main",[t("app-prepare")],1)}),[],!1,null,null,null);t.default=I.exports}}]);